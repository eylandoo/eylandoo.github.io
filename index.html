<!DOCTYPE html>
<html lang="fa" dir="rtl" class="scroll-smooth overflow-x-hidden">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>مستندات جامع OpenVPN Manager API | v2.0.0</title>
    <meta name="description" content="Complete, bilingual API reference for OpenVPN Manager Panel V2 (Multi-Protocol)">

    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'Inter', 'sans-serif'],
                        mono: ['Fira Code', 'Consolas', 'Monaco', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd',
                            400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8',
                            800: '#1e40af', 900: '#1e3a8a', 950: '#172554',
                        },
                        night: {
                            800: '#1e293b', 900: '#0f172a', 950: '#020617'
                        },
                        accent: {
                            teal: '#14b8a6', purple: '#8b5cf6', pink: '#ec4899', orange: '#f97316'
                        }
                    },
                    zIndex: {
                        '60': '60',
                        '100': '100',
                    }
                }
            }
        }
    </script>

    <style>
        /* --- Global Resets --- */
        html, body { overflow-x: hidden; width: 100%; max-width: 100vw; }
        html { scroll-padding-top: 100px; }
        
        body { 
            background-color: #f8fafc; 
            color: #334155; 
            transition: background-color 0.3s, color 0.3s;
        }
        .dark body { 
            background-color: #020617;
            color: #e2e8f0; 
            background-image: 
                radial-gradient(at 10% 10%, rgba(59, 130, 246, 0.15) 0px, transparent 40%),
                radial-gradient(at 90% 90%, rgba(20, 184, 166, 0.1) 0px, transparent 40%);
            background-attachment: fixed;
        }

        /* --- Scrollbar --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* --- Bilingual Engine --- */
        body[data-lang="fa"] { font-family: 'Vazirmatn', sans-serif; }
        body[data-lang="en"] { font-family: 'Inter', sans-serif; letter-spacing: -0.01em; }
        
        body[data-lang="fa"] .lang-en { display: none !important; }
        body[data-lang="en"] .lang-fa { display: none !important; }

        body[dir="rtl"] .mr-auto { margin-right: auto; margin-left: 0; }
        body[dir="ltr"] .mr-auto { margin-left: auto; margin-right: 0; }

        /* --- Glassmorphism --- */
        .glass-panel {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        .dark .glass-panel {
            background: rgba(15, 23, 42, 0.65);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* --- Mobile Menu --- */
        #mobile-overlay {
            position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px); z-index: 90; opacity: 0; visibility: hidden; transition: all 0.3s ease;
        }
        #mobile-overlay.active { opacity: 1; visibility: visible; }

        #sidebar {
            border-right: 1px solid transparent; border-left: 1px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @media (max-width: 1023px) {
            #sidebar {
                position: fixed; top: 0; right: 0; bottom: 0; width: 85%; max-width: 320px;
                background: #ffffff; z-index: 100; transform: translateX(100%);
                box-shadow: -10px 0 25px rgba(0,0,0,0.2); overflow-y: auto; border-left: 1px solid #e2e8f0;
            }
            html[dir="ltr"] #sidebar {
                left: 0; right: auto; transform: translateX(-100%); border-left: none; border-right: 1px solid #e2e8f0;
            }
            .dark #sidebar { background: #0f172a; border-color: #1e293b; }
            #sidebar.mobile-open { transform: translateX(0) !important; }
            body.menu-open { overflow: hidden; }
        }

        @media (min-width: 1024px) {
            #sidebar {
                position: sticky; top: 6rem; height: calc(100vh - 6rem); width: 18rem;
                transform: none !important; background: transparent !important; box-shadow: none !important;
                z-index: 30; overflow-y: auto; padding-bottom: 2rem;
            }
        }

        /* --- UI Components --- */
        .param-card {
            display: grid; grid-template-columns: 1fr; gap: 0.5rem; padding: 1rem;
            border-radius: 0.75rem; background: rgba(248, 250, 252, 0.8); border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .dark .param-card { background: rgba(30, 41, 59, 0.4); }
        @media (min-width: 768px) {
            .param-card { grid-template-columns: 200px 100px 140px 1fr; align-items: start; gap: 1rem; }
        }

        .method-badge {
            font-family: 'Fira Code', monospace; font-weight: 800; letter-spacing: 0.05em;
            padding: 0.3rem 0.7rem; border-radius: 0.5rem; font-size: 0.75rem; text-transform: uppercase; display: inline-flex; align-items: center;
        }
        .method-get { background: rgba(59, 130, 246, 0.15); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.3); }
        .method-post { background: rgba(16, 185, 129, 0.15); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3); }
        .method-put { background: rgba(249, 115, 22, 0.15); color: #f97316; border: 1px solid rgba(249, 115, 22, 0.3); }
        .method-delete { background: rgba(239, 68, 68, 0.15); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }

        pre[class*="language-"] {
            direction: ltr !important; text-align: left !important; border-radius: 0.75rem !important; margin: 0 !important;
            background: #0f172a !important; border: 1px solid #1e293b; font-size: 0.85rem !important; line-height: 1.5 !important;
        }
        code { font-family: 'Fira Code', monospace !important; }

        .nav-link { border-left: 3px solid transparent; border-right: 3px solid transparent; transition: all 0.2s; }
        body[dir="rtl"] .nav-link.active { background: linear-gradient(270deg, rgba(59, 130, 246, 0.12) 0%, transparent 100%); color: #3b82f6; border-right-color: #3b82f6; }
        body[dir="ltr"] .nav-link.active { background: linear-gradient(90deg, rgba(59, 130, 246, 0.12) 0%, transparent 100%); color: #3b82f6; border-left-color: #3b82f6; }
        .dark body[dir="rtl"] .nav-link.active, .dark body[dir="ltr"] .nav-link.active { color: #60a5fa; border-color: #60a5fa; }
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="antialiased selection:bg-brand-500/30 selection:text-brand-900 dark:selection:text-brand-100" data-lang="fa" dir="rtl">

    <div id="mobile-overlay" aria-hidden="true"></div>

    <header class="fixed top-0 w-full z-40 glass-panel shadow-sm transition-all duration-300">
        <div class="max-w-[1800px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 md:h-20">
                <div class="flex items-center gap-4">
                    <button id="mobile-menu-btn" class="lg:hidden p-2 text-slate-600 hover:text-brand-600 transition-colors rounded-lg hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-white/5 z-50">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                    <div class="flex items-center gap-3 group cursor-pointer">
                        <div class="w-10 h-10 md:w-11 md:h-11 bg-gradient-to-tr from-brand-600 to-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/20">
                            <i class="fa-solid fa-server text-lg"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="font-bold text-lg md:text-xl tracking-tight text-slate-800 dark:text-white">
                                OpenVPN<span class="text-brand-500">Manager</span>
                            </span>
                            <span class="text-[10px] font-mono uppercase tracking-widest text-slate-400 dark:text-slate-500 hidden sm:inline-block">API v2.0.0 (Multi-Protocol)</span>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-2 sm:gap-3">
                    <div class="hidden md:flex items-center gap-2 px-3 py-1.5 bg-slate-100/80 dark:bg-night-800/80 backdrop-blur-sm rounded-full border border-slate-200 dark:border-slate-700/50 ml-2">
                        <span class="relative flex h-2.5 w-2.5">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
                        </span>
                        <span class="text-xs font-bold text-slate-600 dark:text-slate-300 font-mono tracking-wide">ONLINE</span>
                    </div>
                    <button id="lang-toggle" class="flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-night-800 hover:bg-slate-50 dark:hover:bg-night-700 border border-slate-200 dark:border-slate-700 transition-all shadow-sm">
                        <span class="text-xs font-extrabold text-slate-700 dark:text-slate-200 w-5 text-center lang-text">EN</span>
                    </button>
                    <button id="theme-toggle" class="w-10 h-10 rounded-xl bg-white dark:bg-night-800 hover:bg-slate-50 dark:hover:bg-night-700 text-slate-500 dark:text-yellow-400 border border-slate-200 dark:border-slate-700 transition-all flex items-center justify-center shadow-sm">
                        <i class="fa-solid fa-sun text-lg dark:hidden"></i>
                        <i class="fa-solid fa-moon text-lg hidden dark:block"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex max-w-[1800px] mx-auto pt-20 lg:pt-24 pb-12 px-4 sm:px-6 lg:px-8 gap-8 relative min-h-screen">
    	<aside id="sidebar">
            <div class="lg:hidden flex items-center justify-between p-5 border-b border-slate-100 dark:border-slate-800/50 mb-2">
                <span class="font-bold text-slate-700 dark:text-white text-lg">
                    <span class="lang-fa">فهرست</span><span class="lang-en">Menu</span>
                </span>
                <button id="close-sidebar" class="w-8 h-8 rounded-full bg-slate-100 dark:bg-white/10 flex items-center justify-center text-slate-500 dark:text-slate-300 hover:bg-red-100 hover:text-red-500 transition-colors">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="space-y-8 px-3 py-4 lg:p-0">
                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2">
                        <i class="fa-solid fa-rocket text-brand-500"></i>
                        <span class="lang-fa">شروع کار</span><span class="lang-en">Getting Started</span>
                    </h5>
                    <ul class="space-y-1">
                        <li><a href="#intro" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 group-hover:bg-brand-500 transition-colors"></span><span class="lang-fa">معرفی</span><span class="lang-en">Introduction</span></a></li>
                        <li><a href="#auth" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 group-hover:bg-brand-500 transition-colors"></span><span class="lang-fa">احراز هویت</span><span class="lang-en">Authentication</span></a></li>
                        <li><a href="#status" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 group-hover:bg-brand-500 transition-colors"></span><span class="lang-fa">وضعیت سیستم</span><span class="lang-en">System Status</span></a></li>
                    </ul>
                </div>

                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2">
                        <i class="fa-solid fa-users text-brand-500"></i>
                        <span class="lang-fa">مدیریت کاربران</span><span class="lang-en">User Management</span>
                    </h5>
                    <ul class="space-y-1">
                        <li><a href="#users-list" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-blue-500 bg-blue-50 dark:bg-blue-900/30 px-1.5 rounded border border-blue-100 dark:border-blue-800">GET</span><span class="lang-fa">لیست کاربران</span><span class="lang-en">List Users</span></a></li>
                        <li><a href="#users-create" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-green-500 bg-green-50 dark:bg-green-900/30 px-1.5 rounded border border-green-100 dark:border-green-800">POST</span><span class="lang-fa">ایجاد کاربر</span><span class="lang-en">Create User</span></a></li>
                        <li><a href="#users-get" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-blue-500 bg-blue-50 dark:bg-blue-900/30 px-1.5 rounded border border-blue-100 dark:border-blue-800">GET</span><span class="lang-fa">دریافت اطلاعات</span><span class="lang-en">Get User Info</span></a></li>
                        <li><a href="#users-edit" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-orange-500 bg-orange-50 dark:bg-orange-900/30 px-1.5 rounded border border-orange-100 dark:border-orange-800">PUT</span><span class="lang-fa">ویرایش کاربر</span><span class="lang-en">Edit User</span></a></li>
                        <li><a href="#users-actions" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-green-500 bg-green-50 dark:bg-green-900/30 px-1.5 rounded border border-green-100 dark:border-green-800">POST</span><span class="lang-fa">عملیات کنترلی</span><span class="lang-en">Control Actions</span></a></li>
                        <li><a href="#users-delete" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all group"><span class="text-[10px] font-mono text-red-500 bg-red-50 dark:bg-red-900/30 px-1.5 rounded border border-red-100 dark:border-red-800">DEL</span><span class="lang-fa">حذف کاربر</span><span class="lang-en">Delete User</span></a></li>
                        <li><a href="#users-sub" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-blue-500 bg-blue-50 dark:bg-blue-900/30 px-1.5 rounded border border-blue-100 dark:border-blue-800">GET</span><span class="lang-fa">لینک اشتراک</span><span class="lang-en">Subscription Link</span></a></li>
                        <li><a href="#users-ovpn" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="text-[10px] font-mono text-blue-500 bg-blue-50 dark:bg-blue-900/30 px-1.5 rounded border border-blue-100 dark:border-blue-800">GET</span><span class="lang-fa">تمام لینک‌ها (OVPN/Multi)</span><span class="lang-en">All Download Links</span></a></li>
                    </ul>
                </div>

                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2"><i class="fa-solid fa-server text-brand-500"></i><span class="lang-fa">نودها و پورت‌ها</span><span class="lang-en">Nodes & Ports</span></h5>
                    <ul class="space-y-1">
                         <li><a href="#nodes-list" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="lang-fa">مدیریت نودها</span><span class="lang-en">Nodes</span></a></li>
                         <li><a href="#ports-list" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="lang-fa">مدیریت پورت‌ها</span><span class="lang-en">Ports</span></a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2"><i class="fa-solid fa-users-gear text-brand-500"></i><span class="lang-fa">نمایندگان</span><span class="lang-en">Sub-Admins</span></h5>
                    <ul class="space-y-1">
                         <li><a href="#subadmins-list" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="lang-fa">مدیریت نمایندگان</span><span class="lang-en">Manage Sub-Admins</span></a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2">
                        <i class="fa-solid fa-gears text-brand-500"></i>
                        <span class="lang-fa">تنظیمات سیستم</span><span class="lang-en">System Settings</span>
                    </h5>
                    <ul class="space-y-1">
                         <li><a href="#server-settings" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="lang-fa">تنظیمات سرور (PSK)</span><span class="lang-en">Server Config (PSK)</span></a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 px-4 flex items-center gap-2"><i class="fa-solid fa-robot text-brand-500"></i><span class="lang-fa">API ربات</span><span class="lang-en">Bot API</span></h5>
                    <ul class="space-y-1">
                         <li><a href="#bot-servers" class="nav-link flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-xl text-slate-600 dark:text-slate-300 hover:bg-brand-50 dark:hover:bg-white/5 transition-all group"><span class="lang-fa">لیست سرورها</span><span class="lang-en">Server List</span></a></li>
                    </ul>
                </div>
            </div>
        </aside>
<main class="flex-1 min-w-0 w-full">
            
            <section id="intro" class="mb-20 scroll-mt-32 animate-fade-in-up">
                <div class="relative overflow-hidden rounded-3xl bg-gradient-to-br from-night-800 to-night-900 text-white shadow-2xl border border-slate-700/50 p-6 md:p-12">
                    <div class="absolute top-0 right-0 w-64 md:w-96 h-64 md:h-96 bg-brand-500/10 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"></div>
                    <div class="absolute bottom-0 left-0 w-48 md:w-64 h-48 md:h-64 bg-accent-purple/10 rounded-full blur-3xl -ml-20 -mb-20 pointer-events-none"></div>

                    <div class="relative z-10">
                        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-brand-300 text-xs font-mono mb-6 backdrop-blur-sm">
                            <span class="w-2 h-2 bg-brand-400 rounded-full animate-pulse"></span>
                            v2.0.0 Stable (Multi-Protocol)
                        </div>
                        
                        <h1 class="text-3xl md:text-5xl lg:text-6xl font-extrabold mb-6 tracking-tight leading-tight">
                            <span class="lang-fa">مستندات فنی <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-400 to-brand-200">API</span></span>
                            <span class="lang-en">Technical <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-400 to-brand-200">API</span> Docs</span>
                        </h1>
                        
                        <p class="text-base md:text-lg text-slate-300 leading-relaxed max-w-3xl mb-10 lang-fa">
                            راهنمای کامل نسخه ۲.۰.۰ با پشتیبانی از <strong>چند پروتکل (OpenVPN, L2TP, Cisco AnyConnect)</strong>.
                            کنترل کامل بر روی کاربران، نودهای توزیع شده، پورت‌های اختصاصی و سیستم نمایندگی پیشرفته.
                        </p>
                        <p class="text-base md:text-lg text-slate-300 leading-relaxed max-w-3xl mb-10 lang-en">
                            Complete guide for v2.0.0 supporting <strong>Multi-Protocols (OpenVPN, L2TP, Cisco AnyConnect)</strong>.
                            Full control over users, distributed nodes, custom ports, and advanced reseller system.
                        </p>
                        
                        <div class="flex flex-col sm:flex-row gap-4">
                            <div class="flex items-center gap-3 bg-white/5 backdrop-blur-md border border-white/10 rounded-xl px-5 py-4 hover:bg-white/10 transition-colors group cursor-pointer">
                                <div class="w-10 h-10 rounded-lg bg-brand-500/20 flex items-center justify-center text-brand-400 group-hover:scale-110 transition-transform">
                                    <i class="fa-solid fa-link"></i>
                                </div>
                                <div class="min-w-0">
                                    <div class="text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-1">Base URL</div>
                                    <code class="font-mono text-brand-100 text-sm truncate block">https://your-domain.com:PORT</code>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 bg-white/5 backdrop-blur-md border border-white/10 rounded-xl px-5 py-4 hover:bg-white/10 transition-colors group">
                                <div class="w-10 h-10 rounded-lg bg-accent-purple/20 flex items-center justify-center text-accent-purple group-hover:scale-110 transition-transform">
                                    <i class="fa-solid fa-shield-halved"></i>
                                </div>
                                <div>
                                    <div class="text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-1">Protocols</div>
                                    <code class="font-mono text-accent-100 text-sm">OVPN / L2TP / CISCO</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="auth" class="mb-24 scroll-mt-32">
                 <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-brand-100 dark:bg-brand-900/20 flex items-center justify-center text-brand-600 dark:text-brand-400 shadow-sm">
                        <i class="fa-solid fa-key text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">احراز هویت</span><span class="lang-en">Authentication</span>
                        </h2>
                    </div>
                </div>
                <div class="glass-panel rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 dark:border-slate-800">
                    <p class="text-slate-600 dark:text-slate-300 mb-4 leading-loose lang-fa">
                        تمام درخواست‌ها نیازمند هدر <code class="text-pink-600 bg-pink-50 dark:bg-pink-900/30 px-1.5 py-0.5 rounded text-xs font-bold border border-pink-200 dark:border-pink-800">X-API-KEY</code> هستند.
                    </p>
                    <p class="text-slate-600 dark:text-slate-300 mb-4 leading-loose lang-en">
                         All requests require the <code class="text-pink-600 bg-pink-50 dark:bg-pink-900/30 px-1.5 py-0.5 rounded text-xs font-bold border border-pink-200 dark:border-pink-800">X-API-KEY</code> header.
                    </p>
                    <div class="bg-night-900 rounded-xl border border-slate-800 overflow-hidden">
                        <div class="p-4 overflow-x-auto">
<pre class="language-bash !bg-transparent !border-none !m-0 !p-0"><code class="!text-sm !font-mono">X-API-KEY: y0ur_s3cur3_ap1_k3y_h3r3
Content-Type: application/json</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="status" class="mb-24 scroll-mt-32">
                 <div class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm"><span class="method-badge method-get">GET</span><span class="font-bold">/api/v1/status</span></div>
                    </div>
                    <div class="p-6">
                        <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs"><code>{ "success": true, "message": "Panel is online", "timestamp": "2024-01-01T12:00:00.000000" }</code></pre>
                    </div>
                 </div>
            </section>

            <section id="users" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-brand-500 shadow-sm shadow-brand-500/10">
                        <i class="fa-solid fa-users text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">مدیریت کاربران</span><span class="lang-en">User Management</span>
                        </h2>
                    </div>
                </div>

                <div id="users-list" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/users/list_all</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Auth Required</div>
                    </div>
                    
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-6 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">دریافت لیست کامل کاربران. خروجی شامل وضعیت پروتکل‌های جدید (L2TP/Cisco) نیز می‌باشد.</span>
                            <span class="lang-en">Get full user list. Output now includes new protocol statuses (L2TP/Cisco).</span>
                        </p>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 p-4">
                             <div class="relative">
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "main_admin_users": [
    { 
      "username": "user1", 
      "is_active": true,
      "enable_l2tp": true,
      "enable_cisco": false,
      "total_traffic_bytes": 1048576,
      "allowed_nodes": ["1", "2"]
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
				
				<section id="users-create" class="mb-20">
                    <div class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                        <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                            <div class="flex items-center gap-3 font-mono text-sm">
                                <span class="method-badge method-post">POST</span>
                                <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/users</span>
                            </div>
                            <div class="text-xs text-slate-400 font-mono">Auth Required</div>
                        </div>
                        
                        <div class="p-6 md:p-8">
                            <p class="text-slate-600 dark:text-slate-300 mb-8 leading-loose text-sm md:text-base">
                                <span class="lang-fa">
                                    قدرتمندترین متد برای ایجاد کاربر. این متد از دو حالت **تکی** و **گروهی (Bulk)** پشتیبانی می‌کند.
                                    <br>
                                    <strong class="text-brand-500">نکته فنی:</strong> این درخواست به صورت <span class="font-mono bg-slate-100 dark:bg-slate-800 px-1 rounded">Thread-Safe</span> اجرا می‌شود و پس از ایجاد کاربر در دیتابیس، عملیات سنگین همگام‌سازی با نودها را مدیریت می‌کند.
                                </span>
                                <span class="lang-en">
                                    Powerful endpoint for creating users. Supports both **Single** and **Bulk** creation modes.
                                    <br>
                                    <strong class="text-brand-500">Technical Note:</strong> This request is <span class="font-mono bg-slate-100 dark:bg-slate-800 px-1 rounded">Thread-Safe</span>. It handles database creation and heavy node synchronization tasks.
                                </span>
                            </p>

                            <div class="mb-8">
                                <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                    <span class="lang-fa">لیست کامل پارامترهای ورودی</span>
                                    <span class="lang-en">Full Input Parameters</span>
                                </h4>
                                
                                <div class="param-list space-y-3">
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">username</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400">Conditional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">نام کاربری (حروف انگلیسی و اعداد). اگر <code>bulk_count</code> ارسال نشود، این فیلد <strong>اجباری</strong> است.</span>
                                            <span class="lang-en">Username (alphanumeric). Required if <code>bulk_count</code> is not provided.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">bulk_count</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">تعداد کاربر برای ساخت گروهی. در صورت ارسال، نام‌های کاربری به صورت تصادفی تولید می‌شوند و فیلد <code>username</code> نادیده گرفته می‌شود.</span>
                                            <span class="lang-en">Count for bulk creation. If sent, random usernames are generated and <code>username</code> field is ignored.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">max_clients</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 1</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">حداکثر تعداد اتصال همزمان.</span>
                                            <span class="lang-en">Max concurrent connections.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">data_limit</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">مقدار عددی محدودیت حجم. <code>null</code> یا <code>0</code> به معنی نامحدود است.</span>
                                            <span class="lang-en">Traffic limit value. <code>null</code> or <code>0</code> means unlimited.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">data_limit_unit</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 'GB'</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">واحد حجم. مقادیر مجاز: <code>MB</code>, <code>GB</code>.</span>
                                            <span class="lang-en">Traffic unit. Allowed: <code>MB</code>, <code>GB</code>.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">activation_type</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 'fixed_date'</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">نوع فعال‌سازی: <code>fixed_date</code> (تاریخ ثابت) یا <code>flexible_days</code> (شروع از اولین اتصال).</span>
                                            <span class="lang-en">Activation mode: <code>fixed_date</code> or <code>flexible_days</code> (starts on first connect).</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">expiry_date_str</div>
                                        <div class="text-xs text-slate-500">String (Date)</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400">Conditional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">فرمت <code>YYYY-MM-DD</code>. اگر نوع فعال‌سازی <code>fixed_date</code> باشد، این فیلد الزامی است.</span>
                                            <span class="lang-en">Format <code>YYYY-MM-DD</code>. Required if activation type is <code>fixed_date</code>.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">expiry_days</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400">Alternative</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">تعداد روز تا انقضا (جایگزین تاریخ دقیق). تاریخ انقضا = امروز + این تعداد روز.</span>
                                            <span class="lang-en">Days until expiry (alternative to exact date). Expiry = Today + this value.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">pending_activation_days</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400">Conditional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">تعداد روز اعتبار پس از اولین اتصال. اگر نوع فعال‌سازی <code>flexible_days</code> باشد، این فیلد <strong>اجباری</strong> است.</span>
                                            <span class="lang-en">Valid days count after first connect. Required if activation type is <code>flexible_days</code>.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">nodes</div>
                                        <div class="text-xs text-slate-500">Array[Int]</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">لیست ID نودهای مجاز برای کاربر. مثال: <code>[1, 2]</code>.</span>
                                            <span class="lang-en">List of allowed node IDs. Example: <code>[1, 2]</code>.</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">notes</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">یادداشت برای کاربر (نمایش در پنل).</span>
                                            <span class="lang-en">User notes (displayed in panel).</span>
                                        </div>
                                    </div>
                                    <div class="param-card">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">sub_admin_id</div>
                                        <div class="text-xs text-slate-500">Integer</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Main Admin Only</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">اختصاص کاربر به یک نماینده خاص. (فقط ادمین اصلی مجاز است).</span>
                                            <span class="lang-en">Assign user to a specific sub-admin. (Main Admin only).</span>
                                        </div>
                                    </div>
                                    <div class="param-card border-l-4 border-l-indigo-500">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">enable_l2tp</div>
                                        <div class="text-xs text-slate-500">Boolean</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: false</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">فعال‌سازی پروتکل L2TP/IPsec.</span>
                                            <span class="lang-en">Enable L2TP/IPsec protocol.</span>
                                        </div>
                                    </div>
                                    <div class="param-card border-l-4 border-l-indigo-500">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">l2tp_password</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">رمز عبور L2TP. اگر خالی باشد، سیستم یک رمز تصادفی تولید می‌کند.</span>
                                            <span class="lang-en">L2TP password. If empty, a random password will be generated.</span>
                                        </div>
                                    </div>
                                    <div class="param-card border-l-4 border-l-red-500">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">enable_cisco</div>
                                        <div class="text-xs text-slate-500">Boolean</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: false</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">فعال‌سازی پروتکل Cisco AnyConnect.</span>
                                            <span class="lang-en">Enable Cisco AnyConnect protocol.</span>
                                        </div>
                                    </div>
                                    <div class="param-card border-l-4 border-l-red-500">
                                        <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">cisco_password</div>
                                        <div class="text-xs text-slate-500">String</div>
                                        <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                        <div class="text-sm text-slate-600 dark:text-slate-400">
                                            <span class="lang-fa">رمز عبور Cisco. اگر خالی باشد، سیستم یک رمز تصادفی تولید می‌کند.</span>
                                            <span class="lang-en">Cisco password. If empty, a random password will be generated.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                            </h4>
                            
                            <div class="space-y-6">
                                <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                    <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                        <span class="text-xs font-bold text-green-600">
                                            <span class="lang-fa">سناریو ۱: کاربر عادی (تاریخ ثابت + ۵۰ گیگ حجم)</span>
                                            <span class="lang-en">Scenario 1: Standard User (Fixed Date + 50GB)</span>
                                        </span>
                                        <span class="text-xs font-mono text-slate-400">200 OK</span>
                                    </div>
                                    <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Request Body</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "username": "client_2024",
  "max_clients": 2,
  "data_limit": 50,
  "data_limit_unit": "GB",
  "activation_type": "fixed_date",
  "expiry_date_str": "2024-12-29",
  "notes": "Basic Plan"
}</code></pre>
                                        </div>
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "1 user(s) created successfully.",
  "created_users": ["client_2024"]
}</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                    <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                        <span class="text-xs font-bold text-blue-600">
                                            <span class="lang-fa">سناریو ۲: کاربر فول امکانات (Cisco + L2TP + نودهای خاص)</span>
                                            <span class="lang-en">Scenario 2: Full Feature User (Cisco + L2TP + Specific Nodes)</span>
                                        </span>
                                        <span class="text-xs font-mono text-slate-400">200 OK</span>
                                    </div>
                                    <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Request Body</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "username": "vip_user_01",
  "activation_type": "flexible_days",
  "pending_activation_days": 30,
  "max_clients": 5,
  "nodes": [1, 3, 5],
  "enable_l2tp": true,
  "l2tp_password": "mypassword123",
  "enable_cisco": true,
  "cisco_password": "mypassword123",
  "notes": "VIP Customer - All Access"
}</code></pre>
                                        </div>
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "1 user(s) created successfully.",
  "created_users": ["vip_user_01"]
}</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                    <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                        <span class="text-xs font-bold text-purple-600">
                                            <span class="lang-fa">سناریو ۳: ساخت گروهی (۵۰ کاربر تستی)</span>
                                            <span class="lang-en">Scenario 3: Bulk Creation (50 Test Users)</span>
                                        </span>
                                        <span class="text-xs font-mono text-slate-400">200 OK</span>
                                    </div>
                                    <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Request Body</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "bulk_count": 50,
  "data_limit": 2,
  "activation_type": "flexible_days",
  "pending_activation_days": 3,
  "notes": "Free Trial Batch #1"
}</code></pre>
                                        </div>
                                        <div class="min-w-0">
                                            <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "50 user(s) created successfully.",
  "created_users": [
    "userXy12a", "userBg98k", "..."
  ]
}</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </section>
           
           <section id="users-get" class="mb-20">
                <div class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/users/&lt;username&gt;</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Auth Required</div>
                    </div>
                    
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 text-sm md:text-base">
                            <span class="lang-fa">دریافت اطلاعات کامل و لحظه‌ای یک کاربر خاص، شامل وضعیت تمام پروتکل‌ها و پسوردها.</span>
                            <span class="lang-en">Get full real-time details of a specific user, including all protocol statuses and passwords.</span>
                        </p>

                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه (کامل)</span>
                                    <span class="lang-en">Full Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "username": "client_1",
  "is_active": true,
  "is_online": true,
  "active_connections": 1,
  "expiry_date_display": "2025-01-20",
  "expiry_date_actual_iso": "2025-01-20T00:00:00",
  "remaining_days": 25,
  "max_clients": 2,
  "data_limit": 50,
  "data_limit_unit": "GB",
  "download_bytes": 15728640,
  "upload_bytes": 5242880,
  "total_traffic_bytes": 20971520,
  "activation_type": "fixed_date",
  "pending_activation_days": null,
  "first_connection_at_iso": "2024-12-01T14:30:00",
  "notes": "Paid User",
  "allowed_nodes": ["1", "5"],
  
  // --- Multi-Protocol Details ---
  "enable_l2tp": true,
  "l2tp_password": "secure_l2tp_pass",
  "l2tp_servers": [
      { "name": "Main Server", "address": "vpn.example.com", "is_tunnel": false },
      { "name": "Node: Germany", "address": "45.1.2.3", "is_tunnel": false }
  ],
  
  "enable_cisco": true,
  "cisco_password": "secure_cisco_pass",
  "cisco_servers": [
      { "name": "Main Server", "address": "vpn.example.com:4443" },
      { "name": "Node: Germany", "address": "45.1.2.3:4443" }
  ]
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="users-edit" class="mb-20">
                <div class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-put">PUT</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/users/&lt;username&gt;</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Auth Required</div>
                    </div>
                    
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 text-sm md:text-base">
                            <span class="lang-fa">
                                ویرایش تنظیمات کاربر. تمام فیلدها اختیاری هستند و فقط مقادیر ارسال شده تغییر می‌کنند.
                                <br>
                                <strong class="text-green-600 dark:text-green-400">نکته مهم:</strong> اگر کاربر به دلیل اتمام حجم یا انقضا غیرفعال شده باشد، افزایش محدودیت‌ها باعث **فعال‌سازی خودکار** او می‌شود.
                            </span>
                            <span class="lang-en">
                                Update user settings. All fields are optional; only sent values are updated.
                                <br>
                                <strong class="text-green-600 dark:text-green-400">Important:</strong> Increasing limits for a user disabled by quota/expiry will **automatically re-enable** them.
                            </span>
                        </p>

                        <div class="mb-8">
                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">لیست کامل پارامترهای قابل ویرایش</span><span class="lang-en">Full Editable Parameters</span>
                            </h4>
                            <div class="param-list space-y-3">
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">max_clients</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تعداد اتصال همزمان جدید.</span>
                                        <span class="lang-en">New concurrent connections limit.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">data_limit</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">حجم کل جدید.</span>
                                        <span class="lang-en">New total data limit.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">data_limit_unit</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">واحد حجم جدید: <code>MB</code>, <code>GB</code>.</span>
                                        <span class="lang-en">New data unit: <code>MB</code>, <code>GB</code>.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">notes</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">ویرایش یادداشت کاربر.</span>
                                        <span class="lang-en">Update user notes.</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-yellow-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">reset_activation</div>
                                    <div class="text-xs text-slate-500">Boolean</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">ریست کردن وضعیت "اولین اتصال" برای کاربران شناور (Flexible).</span>
                                        <span class="lang-en">Reset "First Connection" status for flexible users.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">activation_type</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تغییر نوع اکانت (`fixed_date`, `flexible_days`).</span>
                                        <span class="lang-en">Change account type (`fixed_date`, `flexible_days`).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">expiry_date_str</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تاریخ انقضای جدید (YYYY-MM-DD).</span>
                                        <span class="lang-en">New expiry date (YYYY-MM-DD).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">pending_activation_days</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تعداد روز اعتبار جدید (برای کاربران شناور).</span>
                                        <span class="lang-en">New validity days (for flexible users).</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-indigo-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">enable_l2tp</div>
                                    <div class="text-xs text-slate-500">Boolean</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">فعال/غیرفعال کردن L2TP.</span>
                                        <span class="lang-en">Enable/Disable L2TP.</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-indigo-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">l2tp_password</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تغییر رمز L2TP.</span>
                                        <span class="lang-en">Change L2TP password.</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-red-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">enable_cisco</div>
                                    <div class="text-xs text-slate-500">Boolean</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">فعال/غیرفعال کردن Cisco.</span>
                                        <span class="lang-en">Enable/Disable Cisco.</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-red-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">cisco_password</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تغییر رمز Cisco.</span>
                                        <span class="lang-en">Change Cisco password.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">nodes</div>
                                    <div class="text-xs text-slate-500">Array[Int]</div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تغییر لیست نودهای مجاز.</span>
                                        <span class="lang-en">Update allowed node IDs.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                        </h4>

                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-green-600">
                                        <span class="lang-fa">سناریو ۱: تمدید کاربر (افزایش حجم + تاریخ)</span>
                                        <span class="lang-en">Scenario 1: Renew User (Add Data + Date)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "data_limit": 100, // New total limit
  "expiry_date_str": "2025-05-01",
  "notes": "Renewed by API"
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-red-600">
                                        <span class="lang-fa">سناریو ۲: فعال‌سازی سیسکو برای کاربر موجود</span>
                                        <span class="lang-en">Scenario 2: Enable Cisco for existing user</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "enable_cisco": true,
  "cisco_password": "new_cisco_pass"
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-yellow-600">
                                        <span class="lang-fa">سناریو ۳: ریست کاربر شناور (شروع مجدد دوره)</span>
                                        <span class="lang-en">Scenario 3: Reset Flexible User (Restart Period)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "activation_type": "flexible_days",
  "pending_activation_days": 30,
  "reset_activation": true  // Important: Resets 'first_connection_at' to NULL
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
           
          
<section id="nodes" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-emerald-500 shadow-sm shadow-emerald-500/10">
                        <i class="fa-solid fa-server text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">مدیریت نودها</span><span class="lang-en">Node Management</span>
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                            <span class="lang-fa">کنترل سرورهای فرعی و زیرساخت (Async Provisioning)</span><span class="lang-en">Manage slave servers and infrastructure (Async Provisioning)</span>
                        </p>
                    </div>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 border-s-4 border-red-500 p-4 md:p-6 rounded-xl mb-10 flex items-start gap-4 shadow-sm">
                    <div class="p-2 bg-red-100 dark:bg-red-900/40 rounded-lg text-red-600 flex-shrink-0">
                        <i class="fa-solid fa-shield-halved text-xl"></i>
                    </div>
                    <div>
                        <h5 class="font-bold text-red-800 dark:text-red-200 text-sm md:text-base mb-1">
                            <span class="lang-fa">سطح دسترسی: ادمین اصلی</span><span class="lang-en">Access Level: Main Admin Only</span>
                        </h5>
                        <p class="text-xs md:text-sm text-red-600 dark:text-red-300 leading-relaxed">
                            <span class="lang-fa">مدیریت نودها فقط با <strong>کلید ادمین اصلی</strong> امکان‌پذیر است. نمایندگان (Sub-Admins) دسترسی به این بخش ندارند.</span>
                            <span class="lang-en">Node management is restricted to the <strong>Main Admin Key</strong>. Sub-Admins do not have access to infrastructure settings.</span>
                        </p>
                    </div>
                </div>

                <div id="nodes-list" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/nodes</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 text-sm md:text-base">
                            <span class="lang-fa">دریافت لیست تمام نودها، وضعیت اتصال، متد ارتباطی و حجم مصرفی کل. ترافیک از کش حافظه (`NODE_TRAFFIC_STATE`) خوانده می‌شود.</span>
                            <span class="lang-en">Retrieve list of nodes, connection status, communication method, and total traffic usage. Traffic is read from memory cache (`NODE_TRAFFIC_STATE`).</span>
                        </p>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه</span>
                                    <span class="lang-en">Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "nodes": [
    {
      "id": 1,
      "name": "Germany-Hetzner",
      "ip_address": "45.1.2.3",
      "status": "online",
      "communication_method": "wireguard",
      "openvpn_port": "1194",
      "protocol": "udp",
      "wg_ip": "10.200.200.2",
      "wg_public_key": "Base64Key...",
      "total_traffic": 5368709120,
      "last_checked": "2024-01-20T15:30:00",
      "cisco_port": 4443
    }
  ]
}</code></pre>
                        </div>
                    </div>
                </div>

                <div id="nodes-create" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-post">POST</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/nodes</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only | Async (202 Accepted)</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">
                                افزودن نود جدید. این درخواست بلافاصله پاسخ <code>202 Accepted</code> می‌دهد و فرآیند نصب سنگین (نصب OpenVPN/Cisco/L2TP، تنظیم WireGuard/Direct، انتقال فایل‌ها) در پس‌زمینه شروع می‌شود.
                            </span>
                            <span class="lang-en">
                                Add a new node. Returns <code>202 Accepted</code> immediately. The heavy provisioning process (Install OpenVPN/Cisco/L2TP, Setup WireGuard/Direct, Transfer files) runs in a background thread.
                            </span>
                        </p>

                        <div class="mb-8">
                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">پارامترهای ورودی کامل</span><span class="lang-en">Full Input Parameters</span>
                            </h4>
                            
                            <div class="param-list space-y-3">
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">name</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">نام نمایشی نود.</span>
                                        <span class="lang-en">Node display name.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">ip_address</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">آی‌پی پابلیک یا دامنه نود.</span>
                                        <span class="lang-en">Node public IP or domain.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">ssh_password</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">رمز عبور روت (SSH Root Password).</span>
                                        <span class="lang-en">Root password (SSH Root Password).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">openvpn_port</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 1194</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">پورت سرویس OpenVPN روی نود.</span>
                                        <span class="lang-en">OpenVPN service port on node.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">protocol</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 'udp'</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">پروتکل اتصال (`udp` یا `tcp`).</span>
                                        <span class="lang-en">Connection protocol (`udp` or `tcp`).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">communication_method</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Default: 'wireguard'</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">روش اتصال نود به مادر: <code>wireguard</code> (تونل امن) یا <code>direct_tcp</code> (بدون تانل).</span>
                                        <span class="lang-en">Connection type: <code>wireguard</code> (Secure Tunnel) or <code>direct_tcp</code> (No Tunnel).</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-indigo-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">main_server_endpoint</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">آدرس عمومی سرور مادر (برای تنظیم WireGuard). اگر سرور مادر پشت NAT است استفاده کنید.</span>
                                        <span class="lang-en">Main server public endpoint (for WireGuard). Use if Main Server is behind NAT.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">cisco_port</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">پورت اختصاصی سیسکو برای این نود.</span>
                                        <span class="lang-en">Custom Cisco port for this node.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">sync_all_users</div>
                                    <div class="text-xs text-slate-500">Boolean</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">آیا کاربران موجود به این نود سینک شوند؟</span>
                                        <span class="lang-en">Sync existing users to this node immediately?</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                        </h4>
                        
                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-green-600">
                                        <span class="lang-fa">سناریو ۱: نود استاندارد (WireGuard)</span>
                                        <span class="lang-en">Scenario 1: Standard Node (WireGuard)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">202 Accepted</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "name": "Germany-1",
  "ip_address": "45.1.2.3",
  "ssh_password": "secure_root_pass",
  "communication_method": "wireguard"
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-blue-600">
                                        <span class="lang-fa">سناریو ۲: نود مستقیم (Direct TCP - بدون تانل)</span>
                                        <span class="lang-en">Scenario 2: Direct Node (No Tunnel)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">202 Accepted</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "name": "Iran-Direct",
  "ip_address": "185.1.2.3",
  "ssh_password": "root_pass",
  "communication_method": "direct_tcp",
  "openvpn_port": 443,
  "protocol": "tcp"
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-purple-600">
                                        <span class="lang-fa">سناریو ۳: نود پیشرفته (سینک + سیسکو + Endpoint)</span>
                                        <span class="lang-en">Scenario 3: Advanced (Sync + Cisco + Custom Endpoint)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">202 Accepted</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request
{
  "name": "Turkey-Relay",
  "ip_address": "5.1.2.3",
  "ssh_password": "pass",
  "sync_all_users": true,
  "cisco_port": 8443,
  "main_server_endpoint": "panel.mydomain.com"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="nodes-edit" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-put">PUT</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/nodes/&lt;id&gt;</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only | Config + SSH</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">
                                ویرایش کانفیگ نود. سیستم به طور خودکار از طریق SSH به نود متصل شده، فایل <code>server.conf</code> را آپدیت کرده و سرویس OpenVPN را ریستارت می‌کند. همچنین تنظیمات جدید سیسکو (پورت) را نیز اعمال می‌کند.
                            </span>
                            <span class="lang-en">
                                Update node config. System automatically connects via SSH, updates <code>server.conf</code>, and restarts OpenVPN. Also applies new Cisco port settings.
                            </span>
                        </p>
                        </div>
                </div>

                <div id="nodes-delete" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-delete">DELETE</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/nodes/&lt;id&gt;</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only | Async (202)</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <div class="flex items-start gap-4 mb-6">
                            <div class="p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400"><i class="fa-solid fa-trash-can"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-900 dark:text-white mb-1">
                                    <span class="lang-fa">حذف نود (Master Deletion Task)</span>
                                    <span class="lang-en">Node Deletion (Master Deletion Task)</span>
                                </h4>
                                <p class="text-sm text-slate-600 dark:text-slate-400">
                                    <span class="lang-fa">نود را برای حذف "پرچم‌گذاری" می‌کند و پاسخ فوری می‌دهد. عملیات اصلی شامل: پاکسازی دیتابیس کاربران، حذف Peer از WireGuard سرور اصلی و پاکسازی کامل تمام سرویس‌ها (OpenVPN, L2TP, Cisco) از روی نود در پس‌زمینه انجام می‌شود.</span>
                                    <span class="lang-en">Flags node for deletion and returns immediately. Background task handles: DB cleanup, WireGuard peer removal, and full remote cleanup of all services (OpenVPN, L2TP, Cisco).</span>
                                </p>
                            </div>
                        </div>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه</span>
                                    <span class="lang-en">Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">202 Accepted</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "Node deletion accepted. Background process started."
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section id="ports" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-orange-500 shadow-sm shadow-orange-500/10">
                        <i class="fa-solid fa-ethernet text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">مدیریت پورت‌ها</span><span class="lang-en">Port Management</span>
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                            <span class="lang-fa">مدیریت پورت‌های ورودی (TCP/UDP) و اختصاص به سرورها</span><span class="lang-en">Manage inbound ports (TCP/UDP) and server assignments</span>
                        </p>
                    </div>
                </div>

                <div id="ports-list" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/public/ports</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-6 text-sm md:text-base">
                            <span class="lang-fa">دریافت لیست تمام پورت‌های فعال (پیش‌فرض و کاستوم) به همراه سرورهای اختصاص داده شده.</span>
                            <span class="lang-en">Retrieve a flattened list of all active ports (default & custom) along with their assigned servers.</span>
                        </p>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه</span>
                                    <span class="lang-en">Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "default_ports": [
    { "name": "Main Server", "public_port": "1194", "protocol": "udp", "is_default": true }
  ],
  "custom_ports": [
    { 
      "port_id": 5, 
      "server_identifier": "main", 
      "public_port": 8080, 
      "protocol": "tcp", 
      "server_name": "Main Server" 
    },
    { 
      "port_id": 5, 
      "server_identifier": "node_2", 
      "public_port": 8080, 
      "protocol": "tcp", 
      "server_name": "Node: Germany" 
    }
  ]
}</code></pre>
                        </div>
                    </div>
                </div>

                <div id="ports-create" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-post">POST</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/public/ports</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">
                                ایجاد یک پورت ورودی جدید و اختصاص آن به یک یا چند سرور. سرویس‌های OpenVPN به صورت خودکار روی سرورهای مقصد ایجاد و اجرا می‌شوند.
                            </span>
                            <span class="lang-en">
                                Create a new inbound port and assign it to one or more servers. OpenVPN services are automatically provisioned and started on target servers.
                            </span>
                        </p>

                        <div class="mb-8">
                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">پارامترهای ورودی</span><span class="lang-en">Input Parameters</span>
                            </h4>
                            
                            <div class="param-list space-y-3">
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">public_port</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">شماره پورت (۱۰۲۴ تا ۶۵۵۳۵).</span>
                                        <span class="lang-en">Port number (1024 to 65535).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">protocol</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa"><code>tcp</code> یا <code>udp</code>.</span>
                                        <span class="lang-en"><code>tcp</code> or <code>udp</code>.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">server_ids</div>
                                    <div class="text-xs text-slate-500">Array[String]</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">لیست شناسه سرورها. برای سرور مادر: <code>"main"</code>، برای نودها: <code>"node_{ID}"</code>. مثال: <code>["main", "node_5"]</code></span>
                                        <span class="lang-en">List of server identifiers. Use <code>"main"</code> for Main Server, <code>"node_{ID}"</code> for Nodes. Example: <code>["main", "node_5"]</code></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                        </h4>

                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-green-600">
                                        <span class="lang-fa">سناریو ۱: فقط سرور مادر</span>
                                        <span class="lang-en">Scenario 1: Main Server Only</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "public_port": 8443,
  "protocol": "tcp",
  "server_ids": ["main"]
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-blue-600">
                                        <span class="lang-fa">سناریو ۲: فقط نود آلمان (ID=5)</span>
                                        <span class="lang-en">Scenario 2: German Node Only (ID=5)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "public_port": 2083,
  "protocol": "tcp",
  "server_ids": ["node_5"]
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-purple-600">
                                        <span class="lang-fa">سناریو ۳: خوشه‌ای (مادر + نود)</span>
                                        <span class="lang-en">Scenario 3: Cluster (Main + Node)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "public_port": 443,
  "protocol": "udp",
  "server_ids": ["main", "node_5"]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="ports-delete" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-delete">DELETE</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/public/ports/assignment</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-4 text-sm md:text-base">
                            <span class="lang-fa">حذف یک پورت از یک سرور خاص. سرویس مربوطه متوقف و فایل کانفیگ آن حذف می‌شود.</span>
                            <span class="lang-en">Remove a port from a specific server. Stops service and removes config.</span>
                        </p>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">مثال درخواست</span>
                                    <span class="lang-en">Request Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>// Request Body
{
  "port_id": 5,
  "server_identifier": "node_2"
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>
            
           <section id="subadmins" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-purple-500 shadow-sm shadow-purple-500/10">
                        <i class="fa-solid fa-users-gear text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">مدیریت نمایندگان</span><span class="lang-en">Sub-Admin Management</span>
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                            <span class="lang-fa">فقط ادمین اصلی</span><span class="lang-en">Main Admin Only</span>
                        </p>
                    </div>
                </div>

                <div id="subadmins-list" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/sub_admins</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه</span>
                                    <span class="lang-en">Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "sub_admins": [
    {
      "id": 1,
      "username": "reseller_vip",
      "is_active": true,
      "user_count": 15,
      "max_users_limit": 50,
      "total_usage_quota_gb": 1000,
      "total_data_used_bytes": 53687091200,
      "quota_exceeded": false,
      "expiry_date": "2025-12-30",
      "allowed_servers": ["main_config_0", "node_tunnel_5"]
    }
  ]
}</code></pre>
                        </div>
                    </div>
                </div>

                <div id="subadmins-create" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-post">POST</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/sub_admins</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">ایجاد نماینده جدید. تعیین محدودیت حجمی (`total_usage_quota_gb`) و محدودیت سرور (`allowed_servers`) در اینجا انجام می‌شود.</span>
                            <span class="lang-en">Create a new sub-admin. Define volume quota (`total_usage_quota_gb`) and server restrictions (`allowed_servers`) here.</span>
                        </p>

                        <div class="mb-8">
                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">پارامترهای ورودی (کامل)</span><span class="lang-en">Full Input Parameters</span>
                            </h4>
                            
                            <div class="param-list space-y-3">
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">username</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">نام کاربری یکتا.</span>
                                        <span class="lang-en">Unique username.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">password</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">رمز عبور (هش می‌شود).</span>
                                        <span class="lang-en">Password (will be hashed).</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">max_users_limit</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">حداکثر تعداد کاربر قابل ساخت.</span>
                                        <span class="lang-en">Maximum number of users that can be created.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">total_usage_quota_gb</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">سهمیه کل ترافیک نماینده (گیگابایت). با اتمام این سهمیه، تمام کاربران نماینده غیرفعال می‌شوند.</span>
                                        <span class="lang-en">Total data quota (GB). When exceeded, all users of this sub-admin are automatically disabled.</span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">allowed_servers</div>
                                    <div class="text-xs text-slate-500">Array[String]</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">لیست شناسه‌های مجاز (کانفیگ‌های مادر/نود و تانل‌ها). مثال: <code>["main_config_0", "node_config_2"]</code></span>
                                        <span class="lang-en">List of allowed server IDs (Configs/Tunnels). Example: <code>["main_config_0", "node_config_2"]</code></span>
                                    </div>
                                </div>
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">expiry_date</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">تاریخ انقضای اکانت نماینده (YYYY-MM-DD).</span>
                                        <span class="lang-en">Sub-admin account expiry date (YYYY-MM-DD).</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-blue-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">subscription_port</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">پورت اختصاصی برای لینک‌های اشتراک. سیستم به طور خودکار فایروال را تنظیم می‌کند.</span>
                                        <span class="lang-en">Dedicated port for subscription links. Firewall rules are applied automatically.</span>
                                    </div>
                                </div>
                                <div class="param-card border-l-4 border-l-blue-500">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">panel_port</div>
                                    <div class="text-xs text-slate-500">Integer</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400">Optional</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">پورت اختصاصی برای دسترسی نماینده به پنل مدیریت.</span>
                                        <span class="lang-en">Dedicated port for sub-admin panel access.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                        </h4>
                        
                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-green-600">
                                        <span class="lang-fa">سناریو ۱: نماینده ساده (محدودیت ۵۰ کاربر)</span>
                                        <span class="lang-en">Scenario 1: Simple Sub-Admin (50 Users Limit)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "username": "reseller_1",
  "password": "password123",
  "max_users_limit": 50
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-blue-600">
                                        <span class="lang-fa">سناریو ۲: پورت‌های اختصاصی (لینک و پنل)</span>
                                        <span class="lang-en">Scenario 2: Dedicated Ports (Link & Panel)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "username": "vip_reseller",
  "password": "securePass!",
  "subscription_port": 2096,
  "panel_port": 2083
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-purple-600">
                                        <span class="lang-fa">سناریو ۳: محدودیت حجمی کل (۱ ترابایت)</span>
                                        <span class="lang-en">Scenario 3: Total Data Quota (1TB)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "username": "data_reseller",
  "password": "pass",
  "total_usage_quota_gb": 1024
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                    <div id="subadmins-edit" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm">
                        <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                            <div class="flex items-center gap-3 font-mono text-sm">
                                <span class="method-badge method-put">PUT</span>
                                <span class="text-slate-700 dark:text-slate-200 font-bold text-xs">/api/v1/sub_admins/&lt;id&gt;</span>
                            </div>
                            <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                        </div>
                        <div class="p-6">
                            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                                <span class="lang-fa">
                                    ویرایش اطلاعات. تغییر وضعیت <code>is_active</code> به <code>false</code> تمام کاربران نماینده را غیرفعال می‌کند. فعال کردن مجدد، کاربران واجد شرایط را فعال می‌کند.
                                </span>
                                <span class="lang-en">
                                    Update details. Setting <code>is_active</code> to <code>false</code> disables ALL sub-users. Re-enabling reactivates eligible users.
                                </span>
                            </p>
                        </div>
                    </div>

                    <div id="subadmins-reset" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm">
                        <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                            <div class="flex items-center gap-3 font-mono text-sm">
                                <span class="method-badge method-post">POST</span>
                                <span class="text-slate-700 dark:text-slate-200 font-bold text-xs">/api/v1/sub_admins/&lt;id&gt;/reset_usage</span>
                            </div>
                            <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                        </div>
                        <div class="p-6">
                            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
                                <span class="lang-fa">
                                    صفر کردن حجم مصرفی کل نماینده. اگر نماینده به دلیل اتمام سهمیه (Quota Exceeded) محدود شده باشد، این دستور محدودیت را برداشته و کاربرانش را <strong>فعال</strong> می‌کند.
                                </span>
                                <span class="lang-en">
                                    Reset total usage counter. If Sub-Admin was restricted due to "Quota Exceeded", this action clears the flag and **re-enables** their users.
                                </span>
                            </p>
                        </div>
                    </div>
                </div>

                <div id="subadmins-delete" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-delete">DELETE</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/sub_admins/&lt;id&gt;</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <div class="flex items-start gap-4 mb-4">
                            <div class="p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400"><i class="fa-solid fa-trash-can"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-900 dark:text-white mb-1">
                                    <span class="lang-fa">حذف عمیق</span>
                                    <span class="lang-en">Deep Delete</span>
                                </h4>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                                    <span class="lang-fa">
                                        حذف نماینده و <strong>تمام کاربران زیرمجموعه</strong> او از دیتابیس و تمام سرورها. این عملیات بسیار حساس و غیرقابل بازگشت است.
                                    </span>
                                    <span class="lang-en">
                                        Deletes the Sub-Admin and <strong>ALL associated users</strong> from DB and all servers. Extremely sensitive and irreversible.
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

<section id="server-settings" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-yellow-500 shadow-sm shadow-yellow-500/10">
                        <i class="fa-solid fa-gears text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">تنظیمات سرور</span><span class="lang-en">Server Settings</span>
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                            <span class="lang-fa">مدیریت تنظیمات هسته VPN (مانند کلیدهای امنیتی)</span><span class="lang-en">Manage Core VPN Settings (Security Keys)</span>
                        </p>
                    </div>
                </div>

                <div id="settings-get" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-8">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/server_settings</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-6 text-sm md:text-base">
                            <span class="lang-fa">دریافت تنظیمات فعلی سرور. در حال حاضر شامل کلید پیش‌اشتراکی (PSK) پروتکل L2TP می‌باشد.</span>
                            <span class="lang-en">Get current server configurations. Currently includes the L2TP Pre-Shared Key (PSK).</span>
                        </p>
                        <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                            <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                <span class="text-xs font-bold text-green-600 dark:text-green-400">
                                    <span class="lang-fa">پاسخ نمونه</span>
                                    <span class="lang-en">Response Example</span>
                                </span>
                                <span class="text-xs font-mono text-slate-400">200 OK</span>
                            </div>
                            <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "settings": {
    "ipsec_psk": "MySecureKey123"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div id="settings-ipsec" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-post">POST</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/update_ipsec_psk</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">
                                تغییر کلید پیش‌اشتراکی (PSK) برای پروتکل L2TP/IPsec.
                                <br>
                                <strong class="text-red-500">هشدار مهم:</strong> این تغییر بلافاصله روی سرور اصلی و <strong>تمام نودهای آنلاین</strong> اعمال شده و سرویس‌های <code>xl2tpd</code> و <code>strongswan</code> ریستارت می‌شوند. اتصال کاربران فعلی L2TP قطع خواهد شد.
                            </span>
                            <span class="lang-en">
                                Update Pre-Shared Key (PSK) for L2TP/IPsec protocol.
                                <br>
                                <strong class="text-red-500">Warning:</strong> Changes are applied immediately to the Main Server and <strong>all Online Nodes</strong>. Services will restart, disconnecting current L2TP users.
                            </span>
                        </p>

                        <div class="mb-8">
                            <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                                <span class="lang-fa">پارامترهای ورودی</span><span class="lang-en">Input Parameters</span>
                            </h4>
                            <div class="param-list space-y-3">
                                <div class="param-card">
                                    <div class="font-mono text-sm font-bold text-slate-700 dark:text-slate-200">new_psk</div>
                                    <div class="text-xs text-slate-500">String</div>
                                    <div><span class="px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400">Required</span></div>
                                    <div class="text-sm text-slate-600 dark:text-slate-400">
                                        <span class="lang-fa">کلید جدید. نباید شامل کاراکتر دابل کوتیشن (<code>"</code>) باشد. حداقل ۸ کاراکتر توصیه می‌شود.</span>
                                        <span class="lang-en">New secret key. Must NOT contain double quotes (<code>"</code>). Min 8 chars recommended.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">مثال‌های کاربردی (۳ سناریو)</span><span class="lang-en">Practical Examples (3 Scenarios)</span>
                        </h4>
                        
                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-green-600">
                                        <span class="lang-fa">سناریو ۱: تغییر به کلید ساده</span>
                                        <span class="lang-en">Scenario 1: Simple Key Update</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="min-w-0">
                                        <div class="text-[10px] text-slate-400 uppercase mb-1">Request</div>
                                        <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "new_psk": "mySecret123"
}</code></pre>
                                    </div>
                                    <div class="min-w-0">
                                        <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                        <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "IPsec PSK updated locally and on 5 nodes."
}</code></pre>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-blue-600">
                                        <span class="lang-fa">سناریو ۲: تغییر به کلید پیچیده</span>
                                        <span class="lang-en">Scenario 2: Complex Key Update</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="min-w-0">
                                        <div class="text-[10px] text-slate-400 uppercase mb-1">Request</div>
                                        <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "new_psk": "Xy9#mK!2$pL@vN"
}</code></pre>
                                    </div>
                                    <div class="min-w-0">
                                        <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                        <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "IPsec PSK updated locally and on 12 nodes."
}</code></pre>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-orange-500">
                                        <span class="lang-fa">سناریو ۳: موفقیت با هشدار (برخی نودها آفلاین)</span>
                                        <span class="lang-en">Scenario 3: Success with Warning (Some nodes offline)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <div class="p-4">
                                    <div class="text-[10px] text-slate-400 uppercase mb-1">Response</div>
                                    <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "message": "IPsec PSK updated locally and on 8 nodes. Failed on 2 nodes."
}</code></pre>
                                    <p class="text-xs text-slate-500 mt-2">
                                        <span class="lang-fa">* نکته: اگر نودی آفلاین باشد، کلید جدید را دریافت نمی‌کند و پس از آنلاین شدن باید دستی آپدیت شود.</span>
                                        <span class="lang-en">* Note: Offline nodes won't receive the update and must be synced manually later.</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
           
           <section id="bot-api" class="mb-24 scroll-mt-32">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-white dark:bg-night-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-teal-500 shadow-sm shadow-teal-500/10">
                        <i class="fa-solid fa-robot text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white">
                            <span class="lang-fa">API مخصوص ربات</span><span class="lang-en">Bot Integration API</span>
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                            <span class="lang-fa">ابزارهای کمکی برای توسعه ربات‌های تلگرام و پنل‌های نمایندگی</span>
                            <span class="lang-en">Helper tools for Telegram bots and Reseller panels development</span>
                        </p>
                    </div>
                </div>

                <div id="bot-servers" class="glass-panel rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-300 mb-12">
                    <div class="bg-slate-50/50 dark:bg-night-800/50 p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3 font-mono text-sm">
                            <span class="method-badge method-get">GET</span>
                            <span class="text-slate-700 dark:text-slate-200 font-bold text-xs md:text-sm">/api/v1/public/all_selectable_servers</span>
                        </div>
                        <div class="text-xs text-slate-400 font-mono">Main Admin Only</div>
                    </div>
                    
                    <div class="p-6 md:p-8">
                        <p class="text-slate-600 dark:text-slate-300 mb-8 leading-relaxed text-sm md:text-base">
                            <span class="lang-fa">
                                دریافت لیست مسطح (Flat List) تمام سرورهای قابل انتخاب (شامل کانفیگ مستقیم سرور مادر، نودها، تانل‌ها و مولتی‌سرور).
                                <br>
                                این متد برای **ساخت منوهای انتخاب سرور** در ربات‌های تلگرام (هنگام ساخت نماینده یا کاربر) بسیار کاربردی است. شناسه‌های بازگشتی (ID) دقیقاً همان‌هایی هستند که باید در فیلد <code>allowed_servers</code> متد ایجاد نماینده استفاده شوند.
                            </span>
                            <span class="lang-en">
                                Retrieve a flat list of all selectable servers (Main direct config, Nodes, Tunnels, and Multi-Server).
                                <br>
                                This endpoint is essential for building **Server Selection Menus** in Telegram bots (e.g., when creating a sub-admin). The returned IDs are exactly what should be used in the <code>allowed_servers</code> field.
                            </span>
                        </p>

                        <h4 class="text-sm font-bold text-slate-900 dark:text-white mb-4">
                            <span class="lang-fa">نمونه‌های پاسخ (۳ حالت شبکه)</span><span class="lang-en">Response Examples (3 Network States)</span>
                        </h4>

                        <div class="space-y-6">
                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-teal-600">
                                        <span class="lang-fa">حالت ۱: شبکه کامل (مادر + تانل + نود + مولتی)</span>
                                        <span class="lang-en">State 1: Full Network (Main + Tunnel + Node + Multi)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "servers": [
    { "id": "main_config_0", "name": "Main Server - Direct (Main)" },
    { "id": "main_tunnel_17055", "name": "Main Server - Tunnel: Cloudflare" },
    { "id": "node_config_5", "name": "Node: Germany - Direct" },
    { "id": "node_tunnel_5_17099", "name": "Node: Germany - Tunnel: IR-Relay" },
    { "id": "multi_server_0", "name": "Multi-Config (High Availability)" }
  ]
}</code></pre>
                            </div>

                            <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-blue-600">
                                        <span class="lang-fa">حالت ۲: فقط سرور مادر (بدون نود)</span>
                                        <span class="lang-en">State 2: Main Server Only (No Nodes)</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "servers": [
    { "id": "main_config_0", "name": "Main Server - Direct (Main)" }
  ]
}</code></pre>
                            </div>

                             <div class="bg-slate-50 dark:bg-night-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
                                <div class="px-4 py-2 bg-slate-100 dark:bg-night-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                                    <span class="text-xs font-bold text-purple-600">
                                        <span class="lang-fa">حالت ۳: مادر مخفی + فقط نودها</span>
                                        <span class="lang-en">State 3: Hidden Main + Nodes Only</span>
                                    </span>
                                    <span class="text-xs font-mono text-slate-400">200 OK</span>
                                </div>
                                <pre class="language-json !bg-night-950 !border-none !m-0 !p-3 !text-xs overflow-x-auto"><code>{
  "success": true,
  "servers": [
    { "id": "node_config_1", "name": "Node: France" },
    { "id": "node_config_2", "name": "Node: Turkey" }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <footer class="mt-24 border-t border-slate-200 dark:border-slate-800 pt-12 pb-12 px-4">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6 text-center md:text-right">
                    <div class="flex flex-col items-center md:items-start">
                        <span class="font-bold text-slate-900 dark:text-white text-lg">OpenVPN Manager Panel</span>
                        <span class="text-xs text-slate-500 dark:text-slate-400 font-mono mt-1">API Documentation v2.0.0</span>
                    </div>
                    <div class="text-xs text-slate-400 dark:text-slate-600 font-mono">
                        &copy; 2025 All rights reserved.
						<a onclick="window.open('https://panel.aqayepardakht.ir/trustGateway/71085',null,'width=400, height=600, scrollbars=no, resizable=no')" href="javascript:void(0)" referrerpolicy="strict-origin-when-cross-origin" title="پرداخت امن آقای پرداخت">
                <img style="border-radius: 0px;margin-right: 10px;" src="https://cdn.aqayepardakht.ir/trustlogo/1.svg" alt="پرداخت امن آقای پرداخت"></a>
                    </div>
                </div>
            </footer>

        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. Theme & Language Logic ---
            const html = document.documentElement;
            const body = document.body;
            const themeBtn = document.getElementById('theme-toggle');
            const langBtn = document.getElementById('lang-toggle');

            // Theme Init
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
            }
            themeBtn?.addEventListener('click', () => {
                html.classList.toggle('dark');
                localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
            });

            // Lang Init
            const setLang = (l) => {
                body.setAttribute('data-lang', l);
                html.setAttribute('dir', l === 'fa' ? 'rtl' : 'ltr');
                if(langBtn) langBtn.querySelector('.lang-text').textContent = l === 'fa' ? 'EN' : 'FA';
                localStorage.lang = l;
            };
            setLang(localStorage.lang || 'fa');
            langBtn?.addEventListener('click', () => setLang(body.getAttribute('data-lang') === 'fa' ? 'en' : 'fa'));

            // --- 2. MOBILE MENU LOGIC (DRAWER STYLE) ---
            const menuBtn = document.getElementById('mobile-menu-btn');
            const sidebar = document.getElementById('sidebar');
            const closeBtn = document.getElementById('close-sidebar');
            const overlay = document.getElementById('mobile-overlay');

            function toggleMenu(show) {
                if (show) {
                    sidebar.classList.add('mobile-open');
                    overlay.classList.add('active');
                    body.classList.add('menu-open'); // Lock scroll
                } else {
                    sidebar.classList.remove('mobile-open');
                    overlay.classList.remove('active');
                    body.classList.remove('menu-open'); // Unlock scroll
                }
            }

            menuBtn?.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleMenu(true);
            });

            closeBtn?.addEventListener('click', () => toggleMenu(false));
            overlay?.addEventListener('click', () => toggleMenu(false));

            // Auto-close on link click (Mobile UX)
            sidebar?.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 1024) toggleMenu(false);
                });
            });

            // --- 3. Scroll Spy - Improved ---
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section[id]');
            
            // Improved scroll spy with better active state management
            window.addEventListener('scroll', () => {
                let current = '';
                const scrollPosition = window.scrollY + 200;
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const href = link.getAttribute('href');
                    if (href && href.includes(current)) {
                        link.classList.add('active');
                    }
                });
            });

            // --- 4. Copy Code Feature ---
            document.querySelectorAll('pre').forEach(pre => {
                // Wrap pre in a relative div if not already
                if (pre.parentNode.classList.contains('relative')) return;
                
                const wrapper = document.createElement('div');
                wrapper.className = 'relative group mb-4';
                pre.parentNode.insertBefore(wrapper, pre);
                wrapper.appendChild(pre);
                
                const btn = document.createElement('button');
                btn.className = 'absolute top-2 right-2 p-1.5 rounded-md bg-slate-700/50 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity hover:text-white hover:bg-slate-600';
                btn.innerHTML = '<i class="fa-regular fa-copy"></i>';
                btn.onclick = () => {
                    const code = pre.querySelector('code') ? pre.querySelector('code').innerText : pre.innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        btn.innerHTML = '<i class="fa-solid fa-check text-green-400"></i>';
                        setTimeout(() => btn.innerHTML = '<i class="fa-regular fa-copy"></i>', 2000);
                    });
                };
                wrapper.appendChild(btn);
            });

        });
    </script>
</body>

</html>
